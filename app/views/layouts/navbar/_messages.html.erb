<li class="nav-item dropdown">
  <a class="nav-link" data-toggle="dropdown" href="#">
    <i class="far fa-comments"></i>
    <span class="badge badge-danger navbar-badge"><%= current_user.channels.count %></span>
  </a>
  <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
    <% if current_user.channels.present? %>
      <% current_user.channels.take(3).each do |channel| %>
        <a href="#" class="dropdown-item">
          <!-- Message Start -->
          <div class="media">
            <%= image_tag channel.users.first.avatar.attached? ? channel.users.first.avatar : 'avatar.jpg',
                          class: 'img-size-50 img-circle mr-3' %>
            <div class="media-body">
              <h3 class="dropdown-item-title">
                <%= channel.users.first.name %>
                <span class="float-right text-sm text-danger"><i class="fas fa-star"></i></span>
              </h3>
              <p class="text-sm"><%= channel.messages.last ? channel.messages.last.body : '' %></p>
              <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i>
                <%= channel.messages.last ? channel.messages.last.created_at : '' %>
              </p>
            </div>
          </div>
          <!-- Message End -->
        </a>
      <% end %>
    <% end %>
    <div class="dropdown-divider"></div>
    <%= link_to t('see_all_messsages'), channels_path,
                class: 'dropdown-item dropdown-footer' %>
  </div>
</li>
